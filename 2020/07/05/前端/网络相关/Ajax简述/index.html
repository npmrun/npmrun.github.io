<!DOCTYPE html>
<html>
  <head>
    <title>æ—¶å…‰ğŸ‘</title>
    <!-- å“åº”å¼çš„å…³é”®ï¼Œä¸è®¾ç½®çš„è¯é¡µé¢ä¼šè‡ªåŠ¨ç¼©å° -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="shortcut icon" href>
    
<script src="/lib/highlight.min.js"></script>
 
    <!-- 
<script src="/lib/highlightjs-line-numbers.min.js"></script>
  -->
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
      // hljs.initLineNumbersOnLoad();
    </script>
    
<link rel="stylesheet" href="/assets/init.css">
 
    
<link rel="stylesheet" href="/assets/scroll.css">

    
<link rel="stylesheet" href="/assets/github.css">
 
    
<link rel="stylesheet" href="/assets/gitcode.css">
 
    
<link rel="stylesheet" href="/assets/index.css">

    <script src="https://cdn.bootcdn.net/ajax/libs/graingert-wow/1.1.2/wow.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    
    
  <meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="æ—¶å…‰ä¹‹åŸ" type="application/atom+xml">
</head>
  <body>
    </body></html>

<div class="page-wrapper">
  <header class="header-wrapper session-wrapper wow animate__slideInDown" data-wow-duration="1s">
  <a href="/" class="title" title="home">home</a>
  <ol class="right-menu">  
  
    <li title="é¦–é¡µ"><a href="/">é¦–é¡µ</a></li>
  
    <li title="å…³äº"><a href="/about">å…³äº</a></li>
  
    <li title="å‹æƒ…é“¾æ¥"><a href="/link">å‹æƒ…é“¾æ¥</a></li>
   
  
</ol></header>
  <div class="article-list session-wrapper" style="min-height: auto;margin-top:40px;">
  <!-- <h2 class="article-list__title">Ajaxç®€è¿°</h2> -->
  <div class="article-list__meta">
    <p class="article-list__author">authorè¥¿é£å¹ç››å¤</p>
    <p class="article-list__time">updated:2020-09-17</p>
  </div>
</div>
<article class="markdown-body article  session-wrapper wow animate__fadeIn " data-wow-duration="1s">
  <blockquote>
<p>ä¸»é¢˜ï¼šAjaxçš„ä½¿ç”¨ä¸æ„ä¹‰<br>æ¦‚è¿°ï¼šä¸ºäº†åŠ æ·±åŸºç¡€çš„ç†è§£ï¼Œèƒ½å¤Ÿåœ¨ä¸å€ŸåŠ©åº“çš„æƒ…å†µä¸‹å®ç°ä¸åŒæ–¹å¼çš„è¯·æ±‚æ‰èƒ½å¤Ÿæ›´å¥½çš„ç†è§£é‚£äº›å¼‚æ­¥è¯·æ±‚åº“çš„å·¥ä½œæµç¨‹</p>
</blockquote>
<!--æ­£æ–‡-->
<!--more-->

<p><strong>AJAX æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</strong></p>
<p>å¦‚ä¸Šï¼Œæˆ‘ä»¬ä¸éœ€è¦é‡æ–°åŠ è½½é¡µé¢å°±èƒ½å¤Ÿæ›´æ–°é¡µé¢çš„æ•°æ®ï¼ŒAJAXçš„å‡ºç°æ„å‘³ç€é¢ è¦†äº†ä¼ ç»Ÿçš„å¼€å‘æ¨¡å¼ï¼Œä½¿å¾—é¡µé¢æ›´åŠ çš„æµç•…ï¼Œç”¨æˆ·ä½“éªŒèƒ½å¤Ÿåšåˆ°æè‡´ã€‚</p>
<p>å…¶ä¸­ï¼Œ<strong>XMLHttpRequest æ˜¯ AJAX çš„åŸºç¡€ã€‚</strong></p>
<h2 id="ä»€ä¹ˆæ˜¯XMLHttpRequest-å‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯XMLHttpRequest-å‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯XMLHttpRequest å‘¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯XMLHttpRequest å‘¢ï¼Ÿ</h2><p>æ‰€æœ‰ç°ä»£æµè§ˆå™¨å‡æ”¯æŒ <code>XMLHttpRequest</code> å¯¹è±¡ï¼ˆIE5 å’Œ IE6 ä½¿ç”¨ <code>ActiveXObject</code>ï¼‰ã€‚</p>
<p><code>XMLHttpRequest</code> ç”¨äºåœ¨åå°ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚</p>
<h2 id="å‘é€ä¸€ä¸ªè¯·æ±‚"><a href="#å‘é€ä¸€ä¸ªè¯·æ±‚" class="headerlink" title="å‘é€ä¸€ä¸ªè¯·æ±‚"></a>å‘é€ä¸€ä¸ªè¯·æ±‚</h2><p>æˆ‘ä»¬éœ€è¦åˆ†å‡ æ­¥å®ç°ï¼š</p>
<ol>
<li>åˆ›å»º XMLHttpRequest å¯¹è±¡</li>
<li>ç¡®å®šè¯·æ±‚æ–¹å¼ä»¥åŠä¼ é€’çš„æ•°æ®</li>
<li>æ¥æ”¶æ•°æ®çš„é€’å›åšä¸‹ä¸€æ­¥çš„å¤„ç†</li>
</ol>
<h3 id="åˆ›å»º-XMLHttpRequest-å¯¹è±¡"><a href="#åˆ›å»º-XMLHttpRequest-å¯¹è±¡" class="headerlink" title="åˆ›å»º XMLHttpRequest å¯¹è±¡"></a>åˆ›å»º XMLHttpRequest å¯¹è±¡</h3><p>ç”±äºè€ç‰ˆæœ¬çš„ Internet Explorer ï¼ˆIE5 å’Œ IE6ï¼‰ä½¿ç”¨ ActiveX å¯¹è±¡ï¼Œä¸ºäº†åšéƒ¨åˆ†çš„å…¼å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åšä»¥ä¸‹çš„æ–¹å¼çš„åˆ›å»ºï¼š</p>
<pre><code class="javascript"><span class="keyword">var</span> xmlhttp;
<span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest)
  {<span class="comment">// code for IE7+, Firefox, Chrome, Opera, Safari</span>
  xmlhttp=<span class="keyword">new</span> XMLHttpRequest();
  }
<span class="keyword">else</span>
  {<span class="comment">// code for IE6, IE5</span>
  xmlhttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);
  }</code></pre>
<h3 id="å‘æœåŠ¡å™¨å‘é€è¯·æ±‚"><a href="#å‘æœåŠ¡å™¨å‘é€è¯·æ±‚" class="headerlink" title="å‘æœåŠ¡å™¨å‘é€è¯·æ±‚"></a>å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</h3><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥é…ç½®éœ€è¦å‘é€ç»™æœåŠ¡å™¨æ•°æ®çš„ä¸œè¥¿äº†ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œåªéœ€è¦ä¸‹é¢è¿™ä¸¤ä¸ªå°±èƒ½å¤Ÿå‘é€äº†ï¼š</p>
<pre><code class="javascript">xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"test1.txt"</span>,<span class="literal">true</span>);
xmlhttp.send();</code></pre>
<blockquote>
<table>
<thead>
<tr>
<th align="left">æ–¹æ³•</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>open(method,url,async)</code></td>
<td align="left">è§„å®šè¯·æ±‚çš„ç±»å‹ã€URL ä»¥åŠæ˜¯å¦å¼‚æ­¥å¤„ç†è¯·æ±‚ã€‚<em>method</em>ï¼šè¯·æ±‚çš„ç±»å‹ï¼›<code>GET</code> æˆ– <code>POST</code><em>url</em>ï¼šæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„ä½ç½®<code>asyncï¼štrue</code>ï¼ˆå¼‚æ­¥ï¼‰æˆ– falseï¼ˆåŒæ­¥ï¼‰</td>
</tr>
<tr>
<td align="left"><code>send(string)</code></td>
<td align="left">å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ã€‚<em>string</em>ï¼šä»…ç”¨äº POST è¯·æ±‚</td>
</tr>
</tbody></table>
</blockquote>
<blockquote>
<p><strong>GET è¿˜æ˜¯ POSTï¼Ÿ</strong></p>
<p>ä¸ POST ç›¸æ¯”ï¼ŒGET æ›´ç®€å•ä¹Ÿæ›´å¿«ï¼Œå¹¶ä¸”åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½èƒ½ç”¨ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸­ï¼Œè¯·ä½¿ç”¨ POST è¯·æ±‚ï¼š</p>
<ul>
<li>æ— æ³•ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼ˆæ›´æ–°æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰</li>
<li>å‘æœåŠ¡å™¨å‘é€å¤§é‡æ•°æ®ï¼ˆPOST æ²¡æœ‰æ•°æ®é‡é™åˆ¶ï¼‰</li>
<li>å‘é€åŒ…å«æœªçŸ¥å­—ç¬¦çš„ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒPOST æ¯” GET æ›´ç¨³å®šä¹Ÿæ›´å¯é </li>
</ul>
<p><strong>GET</strong></p>
<pre><code class="javascript">xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"demo_get.asp"</span>,<span class="literal">true</span>);
xmlhttp.send();</code></pre>
<p><strong>POST</strong></p>
<pre><code class="javascript">xmlhttp.open(<span class="string">"POST"</span>,<span class="string">"demo_post.asp"</span>,<span class="literal">true</span>);
xmlhttp.send();</code></pre>
</blockquote>
<p><strong>è®¾ç½®è¯·æ±‚å¤´</strong></p>
<p>è¯·æ±‚å¤´ä¹Ÿæ˜¯ä¸€ä¸ªå¿…é¡»è¦é…ç½®çš„ä¸œè¥¿ï¼š</p>
<pre><code class="javascript">xmlhttp.open(<span class="string">"POST"</span>,<span class="string">"ajax_test.asp"</span>,<span class="literal">true</span>);
xmlhttp.setRequestHeader(<span class="string">"Content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);
xmlhttp.send(<span class="string">"fname=Bill&amp;lname=Gates"</span>);</code></pre>
<blockquote>
<table>
<thead>
<tr>
<th align="left">æ–¹æ³•</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>setRequestHeader(header,value)</code></td>
<td align="left">å‘è¯·æ±‚æ·»åŠ  HTTP å¤´ã€‚<em>header</em>: è§„å®šå¤´çš„åç§°<em>value</em>: è§„å®šå¤´çš„å€¼</td>
</tr>
</tbody></table>
</blockquote>
<h4 id="æœ‰å…³åŒæ­¥ä¸å¼‚æ­¥çš„åˆ†åˆ«"><a href="#æœ‰å…³åŒæ­¥ä¸å¼‚æ­¥çš„åˆ†åˆ«" class="headerlink" title="æœ‰å…³åŒæ­¥ä¸å¼‚æ­¥çš„åˆ†åˆ«"></a>æœ‰å…³åŒæ­¥ä¸å¼‚æ­¥çš„åˆ†åˆ«</h4><p><strong><code>Async = true</code></strong>(å¼‚æ­¥)</p>
<p>å½“ä½¿ç”¨ <code>async=true</code> æ—¶ï¼Œè¯·è§„å®šåœ¨å“åº”å¤„äº <code>onreadystatechange</code> äº‹ä»¶ä¸­çš„å°±ç»ªçŠ¶æ€æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼š</p>
<pre><code class="javascript">xmlhttp.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>
<span class="function">  </span>{
  <span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>)
    {
    <span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"test1.txt"</span>,<span class="literal">true</span>);
xmlhttp.send();</code></pre>
<p><strong><code>Async = false</code></strong>ï¼ˆåŒæ­¥ï¼‰</p>
<p>å¦‚éœ€ä½¿ç”¨ <code>async=false</code>ï¼Œè¯·å°† open() æ–¹æ³•ä¸­çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸º falseï¼š</p>
<pre><code>xmlhttp.open(&quot;GET&quot;,&quot;test1.txt&quot;,false);</code></pre><p>æˆ‘ä»¬ä¸æ¨èä½¿ç”¨<code>async=false</code>ï¼Œä½†æ˜¯å¯¹äºä¸€äº›å°å‹çš„è¯·æ±‚ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<p>è¯·è®°ä½ï¼ŒJavaScript ä¼šç­‰åˆ°æœåŠ¡å™¨å“åº”å°±ç»ªæ‰ç»§ç»­æ‰§è¡Œã€‚å¦‚æœæœåŠ¡å™¨ç¹å¿™æˆ–ç¼“æ…¢ï¼Œåº”ç”¨ç¨‹åºä¼šæŒ‚èµ·æˆ–åœæ­¢ã€‚</p>
<p><strong>æ³¨é‡Šï¼š</strong>å½“æ‚¨ä½¿ç”¨<code>async=false</code> æ—¶ï¼Œè¯·ä¸è¦ç¼–å†™ <code>onreadystatechange</code> å‡½æ•° - æŠŠä»£ç æ”¾åˆ° send() è¯­å¥åé¢å³å¯ï¼š</p>
<pre><code>xmlhttp.open(&quot;GET&quot;,&quot;test1.txt&quot;,false);
xmlhttp.send();
document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText;</code></pre><h3 id="æœåŠ¡å™¨å“åº”"><a href="#æœåŠ¡å™¨å“åº”" class="headerlink" title="æœåŠ¡å™¨å“åº”"></a>æœåŠ¡å™¨å“åº”</h3><p>å¦‚éœ€è·å¾—æ¥è‡ªæœåŠ¡å™¨çš„å“åº”ï¼Œè¯·ä½¿ç”¨ <code>XMLHttpRequest</code> å¯¹è±¡çš„ <code>responseText</code> æˆ– <code>responseXML</code> å±æ€§ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å±æ€§</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>responseText</code></td>
<td align="left">è·å¾—å­—ç¬¦ä¸²å½¢å¼çš„å“åº”æ•°æ®ã€‚</td>
</tr>
<tr>
<td align="left"><code>responseXML</code></td>
<td align="left">è·å¾— XML å½¢å¼çš„å“åº”æ•°æ®ã€‚</td>
</tr>
</tbody></table>
<p><strong><code>responseText</code>å±æ€§</strong></p>
<p>å¦‚æœæ¥è‡ªæœåŠ¡å™¨çš„å“åº”å¹¶é XMLï¼Œè¯·ä½¿ç”¨ <code>responseText</code> å±æ€§ã€‚</p>
<p><code>responseText</code> å±æ€§è¿”å›å­—ç¬¦ä¸²å½¢å¼çš„å“åº”ï¼Œå› æ­¤æ‚¨å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<p><strong><code>responseXML</code> å±æ€§</strong></p>
<p>å¦‚æœæ¥è‡ªæœåŠ¡å™¨çš„å“åº”æ˜¯ XMLï¼Œè€Œä¸”éœ€è¦ä½œä¸º XML å¯¹è±¡è¿›è¡Œè§£æï¼Œè¯·ä½¿ç”¨ <code>responseXML</code>å±æ€§ï¼š</p>
<p>è¯·æ±‚ <a href="https://www.w3school.com.cn/example/xmle/books.xml" target="_blank" rel="external nofollow noopener noreferrer">books.xml</a> æ–‡ä»¶ï¼Œå¹¶è§£æå“åº”ï¼š</p>
<pre><code class="javascript">xmlDoc=xmlhttp.responseXML;
txt=<span class="string">""</span>;
x=xmlDoc.getElementsByTagName(<span class="string">"ARTIST"</span>);
<span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;x.length;i++)
  {
  txt=txt + x[i].childNodes[<span class="number">0</span>].nodeValue + <span class="string">"&lt;br /&gt;"</span>;
  }
<span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).innerHTML=txt;</code></pre>
<h3 id="é™„å½•ï¼ˆonreadystatechange-äº‹ä»¶ï¼‰"><a href="#é™„å½•ï¼ˆonreadystatechange-äº‹ä»¶ï¼‰" class="headerlink" title="é™„å½•ï¼ˆonreadystatechange äº‹ä»¶ï¼‰"></a>é™„å½•ï¼ˆ<code>onreadystatechange</code> äº‹ä»¶ï¼‰</h3><p>å½“è¯·æ±‚è¢«å‘é€åˆ°æœåŠ¡å™¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä¸€äº›åŸºäºå“åº”çš„ä»»åŠ¡ã€‚</p>
<p>æ¯å½“ <code>readyState</code> æ”¹å˜æ—¶ï¼Œå°±ä¼šè§¦å‘ <code>onreadystatechange</code> äº‹ä»¶ã€‚</p>
<p><code>readyState</code> å±æ€§å­˜æœ‰ <code>XMLHttpRequest</code> çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>
<p>ä¸‹é¢æ˜¯ <code>XMLHttpRequest</code> å¯¹è±¡çš„ä¸‰ä¸ªé‡è¦çš„å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th align="left">å±æ€§</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>onreadystatechange</code></td>
<td align="left">å­˜å‚¨å‡½æ•°ï¼ˆæˆ–å‡½æ•°åï¼‰ï¼Œæ¯å½“ <code>readyState</code> å±æ€§æ”¹å˜æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¯¥å‡½æ•°ã€‚</td>
</tr>
<tr>
<td align="left"><code>readyState</code></td>
<td align="left">å­˜æœ‰ <code>XMLHttpRequest</code> çš„çŠ¶æ€ã€‚ä» 0 åˆ° 4 å‘ç”Ÿå˜åŒ–ã€‚0: è¯·æ±‚æœªåˆå§‹åŒ–1: æœåŠ¡å™¨è¿æ¥å·²å»ºç«‹2: è¯·æ±‚å·²æ¥æ”¶3: è¯·æ±‚å¤„ç†ä¸­4: è¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ª</td>
</tr>
<tr>
<td align="left">status</td>
<td align="left">200: â€œOKâ€404: æœªæ‰¾åˆ°é¡µé¢</td>
</tr>
</tbody></table>
<p>åœ¨ <code>onreadystatechange</code> äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬è§„å®šå½“æœåŠ¡å™¨å“åº”å·²åšå¥½è¢«å¤„ç†çš„å‡†å¤‡æ—¶æ‰€æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p>
<p>å½“ <code>readyState</code> ç­‰äº 4 ä¸”çŠ¶æ€ä¸º 200 æ—¶ï¼Œè¡¨ç¤ºå“åº”å·²å°±ç»ªï¼š</p>
<pre><code>xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)
    {
    document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText;
    }
  }</code></pre><blockquote>
<p><strong>æ³¨é‡Šï¼š</strong><code>onreadystatechange</code> äº‹ä»¶è¢«è§¦å‘ 5 æ¬¡ï¼ˆ0 - 4ï¼‰ï¼Œå¯¹åº”ç€ <code>readyState</code>çš„æ¯ä¸ªå˜åŒ–ã€‚</p>
</blockquote>
<blockquote>
<p>æ¥æºï¼š</p>
<p><a href="https://www.w3school.com.cn/ajax/ajax_intro.asp" target="_blank" rel="external nofollow noopener noreferrer">w3school</a></p>
</blockquote>

</article>


  <div id="vcomments" class="session-wrapper" style="animation-duration: 2s;animation-delay: 0ms;"></div>
  
</div>

<script src="/js/layout/index.js"></script>



  <script>
    var script = document.createElement('script');
    script.async = true;
    script.src="//unpkg.com/valine/dist/Valine.min.js"
    script.onload = function(){
      new Valine({
        el: '#vcomments',
        appId: 'WtelXWOsz6zEJvXGl3LToHOK-MdYXbMMI',
        appKey: 'B9X5fQyROCs2pFu7yt0NeLIP'
      })
      var el = document.getElementById('vcomments');
      if (el) {
        el.classList.add("animate__fadeIn");
        el.setAttribute("data-wow-duration","1s");
        el.classList.add("wow");
      }
    }
    document.body.appendChild(script)
  </script>

<script>
  var wow = new WOW({
    boxClass: 'wow',
    animateClass: 'animated',
    offset: 0,
    mobile: true,
    live: true
  });
  wow.init(); 
</script>


